<!DOCTYPE html>
<html>
<head>
  <title>StyloXio Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family:sans-serif; background:#0f172a; color:white; padding:20px; }
    .card { background:#1e293b; padding:20px; border-radius:12px; margin:auto; max-width:420px; }
    input { width:100%; padding:10px; margin:6px 0; border-radius:8px; border:1px solid #475569; background:#0f172a; color:white; }
    button { padding:10px 18px; border-radius:8px; border:none; margin-top:10px; cursor:pointer; }
    .btn-primary { background:#2563eb; color:white; }
    .btn-outline { background:#334155; color:#cbd5e1; }
    .hidden { display:none; }
  </style>
</head>
<body>

<h2>StyloXio Admin Panel</h2>
<p id="adminUserInfo">Not logged in</p>

<!-- LOGIN CARD -->
<div id="loginSection" class="card">
  <h3>Admin Login</h3>

  <input type="email" id="loginEmail" placeholder="admin@styloxio.com">
  <input type="password" id="loginPassword" placeholder="Password">

  <button class="btn-primary" id="loginBtn">Login</button>
  <button class="btn-outline" id="registerBtn">Create First Admin</button>
  <p id="loginStatus"></p>
</div>

<!-- ADMIN DASHBOARD -->
<div id="adminSection" class="card hidden">
  <h3>Welcome Admin</h3>
  <button class="btn-outline" id="logoutBtn">Logout</button>
</div>

<!-- FIREBASE SDKs (v8 COMPATIBLE) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<!-- YOUR FIREBASE CONFIG FILE -->
<script src="firebase-config.js"></script>

<script>
  const $ = id => document.getElementById(id);

  // AUTH STATE CHANGE
  auth.onAuthStateChanged(user => {
    if (user) {
      $("loginSection").classList.add("hidden");
      $("adminSection").classList.remove("hidden");
      $("adminUserInfo").innerText = "Logged in as: " + user.email;
    } else {
      $("loginSection").classList.remove("hidden");
      $("adminSection").classList.add("hidden");
      $("adminUserInfo").innerText = "Not logged in";
    }
  });

  // LOGIN ADMIN
  $("loginBtn").addEventListener("click", async () => {
    $("loginStatus").innerText = "Logging in...";
    try {
      await auth.signInWithEmailAndPassword($("loginEmail").value, $("loginPassword").value);
      $("loginStatus").innerText = "Login successful ✔";
    } catch (e) {
      $("loginStatus").innerText = e.message;
    }
  });

  // CREATE FIRST ADMIN
  $("registerBtn").addEventListener("click", async () => {
    $("loginStatus").innerText = "Creating admin...";
    try {
      await auth.createUserWithEmailAndPassword($("loginEmail").value, $("loginPassword").value);
      $("loginStatus").innerText = "Admin created ✔";
    } catch (e) {
      $("loginStatus").innerText = e.message;
    }
  });

  // LOGOUT
  $("logoutBtn").addEventListener("click", () => auth.signOut());
</script>

</body>
</html>
