<h2>New Orders</h2>
<div id="orders"></div>

<script>
db.collection("orders").orderBy("timestamp", "desc").onSnapshot(snapshot => {
  let ordersHTML = "";
  snapshot.forEach(doc => {
    const o = doc.data();
    ordersHTML += `
      <div class="orderCard">
        <h3>${o.customerName} (${o.phone})</h3>
        <p>ğŸ“ ${o.address}</p>
        <p>ğŸ›’ Total: â‚¹${o.totalAmount}</p>
        <p><b>Products:</b></p>
        <ul>
          ${o.products.map(p => `<li>${p.name} x ${p.qty} - â‚¹${p.price}</li>`).join("")}
        </ul>
        <button onclick="updateOrder('${doc.id}', 'Accepted')">Accept</button>
        <button onclick="updateOrder('${doc.id}', 'Rejected')">Reject</button>
      </div>
    `;
  });
  document.getElementById("orders").innerHTML = ordersHTML;
});

function updateOrder(id, status){
  db.collection("orders").doc(id).update({ status });
}
</script>
